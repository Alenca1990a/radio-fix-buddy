<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IPTV Player v9</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" rel="stylesheet">
  <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    :root {
      --primary-color: #00A848;
      --primary-gradient: linear-gradient(135deg, #00A848, #00c851);
      --bg-primary: #1f1f1f;
      --bg-secondary: #252525;
      --bg-tertiary: #303030;
      --bg-quaternary: #404040;
      --text-primary: #ffffff;
      --text-secondary: #9CA3AF;
      --text-tertiary: #D1D5DB;
    }

    /* Temas */
    [data-theme="black"] {
      --primary-color: #ffffff;
      --primary-gradient: linear-gradient(135deg, #333333, #555555);
      --bg-primary: #000000;
      --bg-secondary: #111111; /* FUNDO PARA CANAIS,  FILMES E SERIES E RÁDIOS */
      --bg-tertiary: #222222; /* FUNDO DA LISTA DE ITENS*/
      --bg-quaternary: #333333;
    }

    [data-theme="claro"] {
      --primary-color: #007bff;
      --primary-gradient: linear-gradient(135deg, #007bff, #0056b3);
      --bg-primary: #ffffff;
      --bg-secondary: #f8f9fa;
      --bg-tertiary: #e9ecef;
      --bg-quaternary: #dee2e6;
      --text-primary: #212529;
      --text-secondary: #6c757d;
      --text-tertiary: #495057;
    }

    [data-theme="azul"] {
      --primary-color: #007bff;
      --primary-gradient: linear-gradient(135deg, #007bff, #0056b3);
      --bg-primary: #0d1117;
      --bg-secondary: #161b22;
      --bg-tertiary: #21262d;
      --bg-quaternary: #30363d;
    }

    [data-theme="vermelho"] {
      --primary-color: #dc3545;
      --primary-gradient: linear-gradient(135deg, #dc3545, #c82333);
      --bg-primary: #1a0d0d;
      --bg-secondary: #2d1b1b;
      --bg-tertiary: #3d2626;
      --bg-quaternary: #4d3131;
    }

    [data-theme="verde"] {
      --primary-color: #28a745;
      --primary-gradient: linear-gradient(135deg, #28a745, #1e7e34);
      --bg-primary: #0d1a0d;
      --bg-secondary: #1b2d1b;
      --bg-tertiary: #263d26;
      --bg-quaternary: #314d31;
    }

    * {
      box-sizing: border-box;
    }
    html, body {
      background-color: var(--bg-primary);
      color: var(--text-primary);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      height: 100%;
      overflow-x: hidden;
    }
    
    /* Header Styles - SEMPRE NO TOPO EM PAISAGEM */
    .header {
      background: var(--primary-gradient);
      padding: 0.75rem 1rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      position: sticky;
      top: 0;
      z-index: 1000;
      order: -1; /* Sempre no topo */
    }
    .header h1 {
      margin: 0;
      font-size: clamp(1.1rem, 4vw, 1.5rem);
      font-weight: 700;
      color: white;
    }
    .header-buttons {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }
    .header-btn {
      background: rgba(255,255,255,0.2);
      border: none;
      border-radius: 50%;
      width: clamp(35px, 8vw, 40px);
      height: clamp(35px, 8vw, 40px);
      color: white;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(0.8rem, 3vw, 1rem);
    }
    .header-btn:hover {
      background: rgba(255,255,255,0.3);
      transform: scale(1.1);
      color: white;
    }
    
    /* Video Player Styles */
    .video-container {
      position: relative;
      width: 100%;
      padding-top: 56.25%;
      background: #000;
      overflow: hidden;
    }
    #videoPlayer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    
    /* Logo inside player - MELHOR POSICIONAMENTO */
    .player-logo {
      position: absolute;
      bottom: 15px;
      right: 15px;
      width: clamp(40px, 6vw, 80px);
      height: auto;
      opacity: 0.8;
      z-index: 100;
      transition: all 0.3s ease;
      pointer-events: none;
      border-radius: 8px;
      background: rgba(0,0,0,0.3);
      padding: 5px;
      backdrop-filter: blur(5px);
    }
    
    /* NOVA ANIMAÇÃO DA LOGO */
    .player-logo.animate-center {
      bottom: 50% !important;
      right: 50% !important;
      transform: translate(50%, 50%) scale(2.5);
      opacity: 1;
      z-index: 200;
      transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    
    .player-logo.animate-to-position {
      bottom: 15px !important;
      right: 15px !important;
      transform: none;
      opacity: 0.8;
      z-index: 100;
      transition: all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    
    .player-logo:hover {
      opacity: 1;
    }

    /* Radio info overlay - MELHORADO */
    .radio-info-overlay {
      position: absolute;
      top: 15px;
      left: 15px;
      background: rgba(0,0,0,0.85);
      color: white;
      padding: 12px 16px;
      border-radius: 10px;
      z-index: 100;
      display: none;
      align-items: center;
      gap: 12px;
      max-width: 350px;
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
    .radio-info-overlay.visible {
      display: flex;
    }
    .radio-logo-small {
      width: 45px;
      height: 45px;
      border-radius: 8px;
      object-fit: cover;
      background: var(--primary-gradient);
      border: 2px solid rgba(255,255,255,0.2);
    }
    .radio-details {
      flex: 1;
      min-width: 0;
    }
    .radio-name {
      font-weight: 600;
      font-size: 0.95rem;
      margin: 0 0 4px 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      color: #ffffff;
    }
    .radio-frequency {
      font-size: 0.8rem;
      color: #ccc;
      margin: 0;
      font-weight: 400;
    }

    /* Radio Visual Display - Nova visualização para rádios */
    .radio-visual-display {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: none;
      z-index: 5; /* Reduzido para não esconder controles do player */
    }
    .radio-visual-display.active {
      display: block;
    }
    
    /* Background desfocado */
    .radio-background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      filter: blur(20px);
      transform: scale(1.1);
      opacity: 0.4;
      z-index: 6;
    }
    
    /* Overlay escuro para melhor contraste */
    .radio-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%; 
      background: linear-gradient(135deg, rgba(0,0,0,0.7), rgba(0,0,0,0.5));
      z-index: 7;
    }
    
    /* Conteúdo principal da rádio */
    .radio-main-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: white;
      z-index: 8; /* Abaixo dos controles mas visível */
      width: 90%;
      max-width: 400px;
    }
    
    /* Imagem da rádio com foco */
    .radio-main-image {
      width: clamp(50px, 5vw, 200px);
      height: clamp(50px, 5vw, 200px);
      border-radius: 20px;
      object-fit: cover;
      margin: 0 auto 1.5rem auto;
      display: block;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      border: 3px solid rgba(255,255,255,0.2);
      animation: radioGlow 3s ease-in-out infinite alternate;
    }
    
    @keyframes radioGlow {
      0% { 
        box-shadow: 0 10px 30px rgba(0,0,0,0.5), 0 0 0 rgba(var(--primary-color), 0.0);
      }
      100% { 
        box-shadow: 0 10px 30px rgba(0,0,0,0.5), 0 0 20px rgba(var(--primary-color), 0.3);
      }
    }
    
    /* Informações da rádio */
    .radio-main-info h3 {
      font-size: clamp(1.2rem, 4vw, 2rem);
      font-weight: 700;
      margin: 0 0 0.5rem 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
      line-height: 1.2;
    }
    
    .radio-main-info p {
      font-size: clamp(0.9rem, 3vw, 1.1rem);
      margin: 0 0 1rem 0;
      opacity: 0.9;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    }
    
    /* Indicador de reprodução */
    .radio-playing-indicator {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(var(--primary-color), 0.2);
      backdrop-filter: blur(10px);
      padding: 0.5rem 1rem;
      border-radius: 25px;
      border: 1px solid rgba(255,255,255,0.2);
      font-size: 0.9rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .radio-playing-indicator i {
      animation: pulse 2s infinite;
      color: var(--primary-color);
    }
    
    /* Metadata da música */
    .radio-metadata-info {
      margin-top: 0.75rem;
    }
    
    .now-playing-title {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(10px);
      padding: 0.6rem 1rem;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.1);
      font-size: 0.85rem;
      font-weight: 500;
      max-width: 100%;
      overflow: hidden;
    }
    
    .now-playing-title i {
      color: var(--primary-color);
      animation: rotate 3s linear infinite;
    }
    
    .now-playing-title span {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 300px;
    }
    
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .video-placeholder {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #000000, #1a1a1a);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      color: white;
    }
    .video-placeholder i {
      font-size: clamp(2.5rem, 8vw, 4rem);
      margin-bottom: 1rem;
      opacity: 0.7;
    }
    
    /* Custom Controls */
    .custom-controls {
      position: absolute;
      bottom: 10px;
      left: 10px;
      right: 10px;
      display: none;
      justify-content: center;
      gap: 10px;
      z-index: 150;
    }
    .control-btn {
      background: rgba(0,0,0,0.7);
      border: none;
      color: white;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.8rem;
    }
    .control-btn:hover {
      background: rgba(0,0,0,0.9);
      transform: scale(1.05);
    }
    .control-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    /* GUIAS DE NAVEGAÇÃO PRINCIPAIS */
    .main-nav {
      background-color: var(--bg-secondary);
      padding: 0.5rem 0;
      border-bottom: 2px solid var(--bg-quaternary);
      overflow-x: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    .main-nav::-webkit-scrollbar {
      display: none;
    }
    .main-nav .nav-tabs {
      border: none;
      justify-content: center;
      flex-wrap: nowrap;
      min-width: max-content;
    }
    .main-nav .nav-link {
      background: transparent;
      border: none;
      color: var(--text-secondary);
      padding: clamp(0.5rem, 2vw, 0.75rem) clamp(1rem, 4vw, 2rem);
      font-weight: 600;
      font-size: clamp(0.8rem, 3vw, 1.1rem);
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    .main-nav .nav-link:hover {
      color: var(--text-tertiary);
      background: rgba(255,255,255,0.1);
    }
    .main-nav .nav-link.active {
      color: var(--primary-color);
      background: rgba(220, 20, 60, 0.1);
      border-bottom: 3px solid var(--primary-color);
    }
    
    /* ESTILOS DA BARRA DE GUIAS*/
    .tab-bar {
      background-color: var(--bg-tertiary);
      padding: 0.5rem 0;
      border-bottom: 2px solid var(--bg-quaternary);
      overflow-x: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    .tab-bar::-webkit-scrollbar {
      display: none;
    }
    .tab-nav {
      display: flex;
      gap: 0.5rem;
      padding: 0 1rem;
      min-width: max-content;
    }
    .tab-btn {
      background: transparent;
      border: none;
      color: var(--text-secondary);
      padding: clamp(0.5rem, 2vw, 0.75rem) clamp(1rem, 3vw, 1.5rem);
      border-radius: 0.5rem;
      font-weight: 600;
      font-size: clamp(0.7rem, 2.5vw, 0.9rem);
      white-space: nowrap;
      transition: all 0.3s ease;
      position: relative;
    }
    .tab-btn:hover {
      color: var(--text-tertiary);
      background: rgba(255,255,255,0.1);
    }
    .tab-btn.active {
      color: var(--primary-color);
      background: rgba(220, 20, 60, 0.1);
    }
    
    .content-list {
      background-color: var(--bg-tertiary);
      max-height: 60vh;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #555 var(--bg-tertiary);
    }
    .content-list::-webkit-scrollbar {
      width: 6px;
    }
    .content-list::-webkit-scrollbar-track {
      background: var(--bg-tertiary);
    }
    .content-list::-webkit-scrollbar-thumb {
      background: #555;
      border-radius: 3px;
    }
    
    .content-item {
      display: flex;
      align-items: center;
      padding: clamp(0.5rem, 2vw, 1rem);
      border-bottom: 1px solid var(--bg-quaternary);
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }
    .content-item:hover {
      background-color: var(--bg-quaternary);
      transform: translateX(5px);
    }
    .content-item.playing {
      background: linear-gradient(90deg, rgba(220, 20, 60, 0.2), transparent);
      border-left: 4px solid var(--primary-color);
    }
    .content-icon {
      width: clamp(50px, 12vw, 70px);
      height: clamp(35px, 8vw, 50px);
      object-fit: cover;
      border-radius: 8px;
      margin-right: clamp(0.75rem, 3vw, 1rem);
      background: var(--bg-quaternary);
      flex-shrink: 0;
    }
    .content-info {
      flex: 1;
      min-width: 0;
    }
    .content-title {
      font-weight: 600;
      font-size: clamp(0.8rem, 3vw, 1rem);
      margin: 0 0 0.25rem 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      color: var(--text-primary);
    }
    .content-meta {
      font-size: clamp(0.7rem, 2.5vw, 0.85rem);
      color: var(--text-secondary);
      margin: 0;
      font-weight: 400;
    }
    .content-actions {
      display: flex;
      gap: 0.5rem;
      align-items: center;
      margin-left: auto;
      flex-shrink: 0;
    }
    .action-btn {
      background: transparent;
      border: none;
      color: var(--text-secondary);
      padding: 0.5rem;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: clamp(0.8rem, 3vw, 1rem);
    }
    .action-btn:hover {
      color: var(--primary-color);
      background: rgba(220, 20, 60, 0.1);
      transform: scale(1.1);
    }
    .action-btn.favorited {
      color: #ffd700;
    }
    
    /* Layout responsivo para paisagem */
    @media (orientation: landscape) and (max-height: 500px) {
      .container-fluid {
        display: flex;
        flex-direction: column;
        height: 100vh;
      }
      .video-container {
        flex: 1;
        min-height: 0;
        padding-top: 0;
      }
      #videoPlayer {
        height: 100%;
      }
      .content-sections {
        max-height: 40vh;
        overflow-y: auto;
      }
      .content-list {
        max-height: 35vh;
      }
    }
    
    /* Estilos especiais para série */
    .episode-navigation {
      background-color: var(--bg-secondary);
      padding: 1rem;
      border-bottom: 2px solid var(--bg-quaternary);
    }
    .episode-nav-buttons {
      display: flex;
      gap: 0.5rem;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
    }
    .episode-btn {
      background: transparent;
      border: 2px solid var(--text-secondary);
      color: var(--text-secondary);
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      font-size: 0.9rem;
      min-width: 60px;
    }
    .episode-btn:hover {
      border-color: var(--primary-color);
      color: var(--primary-color);
      background: rgba(220, 20, 60, 0.1);
      transform: translateY(-2px);
    }
    .episode-btn.current {
      background: var(--primary-color);
      border-color: var(--primary-color);
      color: white;
    }
    .episode-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .episode-btn:disabled:hover {
      transform: none;
    }
    
    /* Modais */
    .modal-content {
      background-color: var(--bg-secondary);
      border: 1px solid var(--bg-quaternary);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }
    .modal-header {
      border-bottom: 1px solid var(--bg-quaternary);
      background: var(--primary-gradient);
      border-radius: 15px 15px 0 0;
    }
    .modal-header .modal-title {
      color: white;
      font-weight: 700;
    }
    .modal-header .btn-close {
      filter: invert(1);
      opacity: 0.8;
    }
    .modal-header .btn-close:hover {
      opacity: 1;
    }
    .modal-body {
      background-color: var(--bg-tertiary);
      color: var(--text-primary);
    }
    .modal-footer {
      border-top: 1px solid var(--bg-quaternary);
      background-color: var(--bg-secondary);
      border-radius: 0 0 15px 15px;
    }
    
    /* Botões do modal */
    .btn-primary {
      background: var(--primary-gradient);
      border: none;
      border-radius: 8px;
      padding: 0.5rem 1.5rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(220, 20, 60, 0.3);
    }
    .btn-secondary {
      background: var(--bg-quaternary);
      border: none;
      color: var(--text-primary);
      border-radius: 8px;
      padding: 0.5rem 1.5rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .btn-secondary:hover {
      background: var(--bg-quaternary);
      color: var(--text-primary);
      transform: translateY(-2px);
    }
    
    /* Formulários */
    .form-control {
      background-color: var(--bg-quaternary);
      border: 1px solid var(--bg-quaternary);
      color: var(--text-primary);
      border-radius: 8px;
      padding: 0.75rem;
    }
    .form-control:focus {
      background-color: var(--bg-quaternary);
      border-color: var(--primary-color);
      color: var(--text-primary);
      box-shadow: 0 0 0 0.2rem rgba(220, 20, 60, 0.25);
    }
    .form-control::placeholder {
      color: var(--text-secondary);
    }
    .form-label {
      color: var(--text-primary);
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    
    /* Theme selector */
    .theme-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    .theme-option {
      padding: 1rem;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      border: 2px solid transparent;
      position: relative;
      overflow: hidden;
    }
    .theme-option:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    }
    .theme-option.active {
      border-color: var(--primary-color);
      box-shadow: 0 0 20px rgba(220, 20, 60, 0.3);
    }
    .theme-option.theme-verde { background: linear-gradient(135deg, #28a745, #1e7e34); }
    .theme-option.theme-black { background: linear-gradient(135deg, #333333, #555555); }
    .theme-option.theme-claro { background: linear-gradient(135deg, #007bff, #0056b3); }
    .theme-option.theme-azul { background: linear-gradient(135deg, #007bff, #0056b3); }
    .theme-option.theme-vermelho { background: linear-gradient(135deg, #dc3545, #c82333); }
    
    /* Loading spinner */
    .loading-spinner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 200;
    }
    .spinner-border {
      width: 3rem;
      height: 3rem;
      border-width: 0.3rem;
      border-color: var(--primary-color);
      border-right-color: transparent;
    }
    
    /* Favoritos especiais */
    .favorites-empty {
      text-align: center;
      padding: 3rem 1rem;
      color: var(--text-secondary);
    }
    .favorites-empty i {
      font-size: 3rem;
      margin-bottom: 1rem;
      opacity: 0.5;
    }
    
    /* Busca */
    .search-container {
      position: relative;
      margin-bottom: 1rem;
    }
    .search-input {
      width: 100%;
      padding: 0.75rem 1rem 0.75rem 3rem;
      background-color: var(--bg-quaternary);
      border: 1px solid var(--bg-quaternary);
      border-radius: 25px;
      color: var(--text-primary);
      font-size: 1rem;
    }
    .search-input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(220, 20, 60, 0.1);
    }
    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-secondary);
    }
    .search-results {
      background-color: var(--bg-tertiary);
      max-height: 50vh;
      overflow-y: auto;
    }
    
    /* Continue assistindo */
    .continue-watching-card {
      background: var(--bg-quaternary);
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      border-left: 4px solid var(--primary-color);
    }
    .continue-watching-card:hover {
      background: var(--bg-primary);
      transform: translateX(5px);
    }
    .progress-bar {
      height: 4px;
      background: var(--bg-tertiary);
      border-radius: 2px;
      overflow: hidden;
      margin-top: 0.5rem;
    }
    .progress-fill {
      height: 100%;
      background: var(--primary-gradient);
      transition: width 0.3s ease;
    }
    
    /* Playlist modal */
    .playlist-item {
      display: flex;
      align-items: center;
      padding: 0.75rem;
      border-bottom: 1px solid var(--bg-quaternary);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .playlist-item:hover {
      background: var(--bg-quaternary);
    }
    .playlist-item.active {
      background: rgba(220, 20, 60, 0.1);
      border-left: 4px solid var(--primary-color);
    }
    
    /* Relay Monitor */
    .relay-monitor {
      font-family: 'Courier New', monospace;
      font-size: 0.8rem;
    }
    .relay-status {
      padding: 0.5rem;
      border-radius: 5px;
      margin-bottom: 0.5rem;
    }
    .relay-status.online {
      background: rgba(40, 167, 69, 0.2);
      border-left: 4px solid #28a745;
    }
    .relay-status.offline {
      background: rgba(220, 53, 69, 0.2);
      border-left: 4px solid #dc3545;
    }
    .relay-status.loading {
      background: rgba(255, 193, 7, 0.2);
      border-left: 4px solid #ffc107;
    }
    
    /* Notificações */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--bg-secondary);
      color: var(--text-primary);
      padding: 1rem 1.5rem;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      z-index: 9999;
      border-left: 4px solid var(--primary-color);
      opacity: 0;
      transform: translateX(100%);
      transition: all 0.3s ease;
    }
    .notification.show {
      opacity: 1;
      transform: translateX(0);
    }
    .notification.error {
      border-left-color: #dc3545;
    }
    .notification.success {
      border-left-color: #28a745;
    }
    .notification.warning {
      border-left-color: #ffc107;
    }
    
    /* Animações gerais */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideInLeft {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    /* Estilos para dispositivos menores */
    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.1rem;
      }
      .header-btn {
        width: 35px;
        height: 35px;
        font-size: 0.8rem;
      }
      .content-icon {
        width: 50px;
        height: 35px;
      }
      .tab-btn {
        padding: 0.5rem 1rem;
        font-size: 0.7rem;
      }
      .episode-btn {
        min-width: 50px;
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
      }
    }
    
    /* Estilos para dispositivos muito pequenos */
    @media (max-width: 480px) {
      .header {
        padding: 0.5rem;
      }
      .content-item {
        padding: 0.5rem;
      }
      .content-icon {
        width: 40px;
        height: 30px;
        margin-right: 0.5rem;
      }
      .theme-selector {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* Estilos para alto contraste */
    @media (prefers-contrast: high) {
      .content-item {
        border: 1px solid var(--text-secondary);
      }
      .tab-btn {
        border: 1px solid transparent;
      }
      .tab-btn.active {
        border-color: var(--primary-color);
      }
    }

    /* Estilos para movimento reduzido */
    @media (prefers-reduced-motion: reduce) {
      * {
        transition: none !important;
        animation: none !important;
      }
    }

    /* Dark mode para sistemas */
    @media (prefers-color-scheme: dark) {
      :root {
        --text-primary: #ffffff;
        --text-secondary: #9CA3AF;
        --text-tertiary: #D1D5DB;
      }
    }

    /* Print styles */
    @media print {
      .header-buttons,
      .main-nav,
      .tab-bar,
      .content-actions {
        display: none !important;
      }
    }
  </style>
</head>

<body>
  <div class="container-fluid p-0">
    <!-- Header -->
    <header class="header d-flex justify-content-between align-items-center">
      <h1>IPTV Player v9</h1>
      <div class="header-buttons">
        <button class="header-btn" data-bs-toggle="modal" data-bs-target="#themeModal" title="Temas">
          <i class="fas fa-palette"></i>
        </button>
        <button class="header-btn" data-bs-toggle="modal" data-bs-target="#searchModal" title="Buscar">
          <i class="fas fa-search"></i>
        </button>
        <button class="header-btn" data-bs-toggle="modal" data-bs-target="#playlistModal" title="Playlist">
          <i class="fas fa-list"></i>
        </button>
        <button class="header-btn" data-bs-toggle="modal" data-bs-target="#continueModal" title="Continue Assistindo">
          <i class="fas fa-history"></i>
        </button>
        <button class="header-btn" data-bs-toggle="modal" data-bs-target="#relayModal" title="Monitor de Relay">
          <i class="fas fa-broadcast-tower"></i>
        </button>
        <button class="header-btn" onclick="shareApp()" title="Compartilhar">
          <i class="fas fa-share-alt"></i>
        </button>
      </div>
    </header>

    <!-- Video Player -->
    <div class="video-container">
      <video id="videoPlayer" class="video-js vjs-default-skin" controls preload="auto" data-setup='{"fluid": true, "responsive": true}'>
        <p class="vjs-no-js">
          Para assistir a este vídeo, é necessário ativar o JavaScript e considerar atualizar para um
          <a href="https://videojs.com/html5-video-support/" target="_blank">navegador web que
          suporte vídeo HTML5</a>.
        </p>
      </video>
      
      <!-- Logo do player -->
      <img class="player-logo" id="playerLogo" src="" alt="Logo" style="display: none;">
      
      <!-- Radio info overlay -->
      <div class="radio-info-overlay" id="radioInfoOverlay">
        <img class="radio-logo-small" id="radioLogoSmall" src="" alt="Rádio">
        <div class="radio-details">
          <div class="radio-name" id="radioNameOverlay"></div>
          <div class="radio-frequency" id="radioFrequencyOverlay"></div>
        </div>
      </div>

      <!-- Radio Visual Display -->
      <div class="radio-visual-display" id="radioVisualDisplay">
        <div class="radio-background" id="radioBackground"></div>
        <div class="radio-overlay"></div>
        <div class="radio-main-content">
          <img class="radio-main-image" id="radioMainImage" src="" alt="Rádio">
          <div class="radio-main-info">
            <h3 id="radioMainName"></h3>
            <p id="radioMainFrequency"></p>
            <div class="radio-playing-indicator">
              <i class="fas fa-volume-up"></i>
              <span>No Ar</span>
            </div>
            <div class="radio-metadata-info">
              <div class="now-playing-title" id="nowPlayingDisplay" style="display: none;">
                <i class="fas fa-music"></i>
                <span id="nowPlayingText">Carregando...</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Video placeholder -->
      <div class="video-placeholder" id="videoPlaceholder">
        <i class="fas fa-play-circle"></i>
        <h3>Selecione um conteúdo para assistir</h3>
        <p>Escolha um canal, filme, série, rádio ou web para começar</p>
      </div>
      
      <!-- Custom controls para séries -->
      <div class="custom-controls" id="customControls">
        <button class="control-btn" id="prevEpisodeBtn" onclick="previousEpisode()">
          <i class="fas fa-step-backward"></i> Anterior
        </button>
        <button class="control-btn" id="nextEpisodeBtn" onclick="nextEpisode()">
          Próximo <i class="fas fa-step-forward"></i>
        </button>
      </div>
    </div>

    <!-- Navegação episódios (apenas para séries) -->
    <div class="episode-navigation" id="episodeNavigation" style="display: none;">
      <div class="episode-nav-buttons" id="episodeButtons">
        <!-- Botões dos episódios serão gerados dinamicamente -->
      </div>
    </div>

    <!-- Navegação Principal -->
    <nav class="main-nav">
      <ul class="nav nav-tabs" id="mainTabs">
        <li class="nav-item">
          <a class="nav-link active" href="#" data-category="channels">
            <i class="fas fa-tv"></i> Canais
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-category="movies">
            <i class="fas fa-film"></i> Filmes
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-category="series">
            <i class="fas fa-video"></i> Séries
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-category="radios">
            <i class="fas fa-radio"></i> Rádios
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-category="web">
            <i class="fas fa-globe"></i> Web
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-category="favorites">
            <i class="fas fa-heart"></i> Favoritos
          </a>
        </li>
      </ul>
    </nav>

    <!-- Barra de abas para subcategorias -->
    <div class="tab-bar" id="tabBar">
      <div class="tab-nav" id="tabNav">
        <!-- Tabs serão geradas dinamicamente -->
      </div>
    </div>

    <!-- Lista de conteúdo -->
    <div class="content-list" id="contentList">
      <!-- Conteúdo será carregado dinamicamente -->
    </div>
  </div>

  <!-- Modal de Temas -->
  <div class="modal fade" id="themeModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Escolher Tema</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="theme-selector">
            <div class="theme-option theme-verde" data-theme="verde">
              <i class="fas fa-leaf"></i>
              <div>Verde</div>
            </div>
            <div class="theme-option theme-black" data-theme="black">
              <i class="fas fa-moon"></i>
              <div>Preto</div>
            </div>
            <div class="theme-option theme-claro" data-theme="claro">
              <i class="fas fa-sun"></i>
              <div>Claro</div>
            </div>
            <div class="theme-option theme-azul" data-theme="azul">
              <i class="fas fa-water"></i>
              <div>Azul</div>
            </div>
            <div class="theme-option theme-vermelho" data-theme="vermelho">
              <i class="fas fa-fire"></i>
              <div>Vermelho</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Busca -->
  <div class="modal fade" id="searchModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Buscar Conteúdo</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" id="searchInput" placeholder="Digite para buscar...">
          </div>
          <div class="search-results" id="searchResults">
            <div class="text-center p-3 text-muted">
              Digite algo para buscar canais, filmes, séries, rádios ou web...
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Playlist -->
  <div class="modal fade" id="playlistModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Adicionar Playlist IPTV</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="playlistUrl" class="form-label">URL da Playlist M3U</label>
            <input type="url" class="form-control" id="playlistUrl" placeholder="https://exemplo.com/playlist.m3u">
          </div>
          <div class="mb-3">
            <label for="playlistName" class="form-label">Nome da Playlist</label>
            <input type="text" class="form-control" id="playlistName" placeholder="Minha Playlist">
          </div>
          <div id="playlistPreview" class="mt-3" style="display: none;">
            <h6>Preview da Playlist:</h6>
            <div id="playlistItems"></div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" id="loadPlaylistBtn">Carregar Playlist</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Continue Assistindo -->
  <div class="modal fade" id="continueModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Continue Assistindo</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div id="continueWatchingList">
            <!-- Lista será preenchida dinamicamente -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Monitor de Relay -->
  <div class="modal fade" id="relayModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Monitor de Relay WebSocket</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="relayUrl" class="form-label">URL do Stream para Relay</label>
            <input type="url" class="form-control" id="relayUrl" placeholder="https://exemplo.com/stream.m3u8">
          </div>
          <div class="relay-monitor">
            <div id="relayStatus" class="relay-status offline">
              <strong>Status:</strong> Desconectado
            </div>
            <div id="relayLogs" style="max-height: 300px; overflow-y: auto;">
              <!-- Logs aparecerão aqui -->
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="stopRelayBtn">Parar Relay</button>
          <button type="button" class="btn btn-primary" id="startRelayBtn">Iniciar Relay</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Erro -->
  <div class="modal fade" id="errorModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Erro</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div id="errorMessage"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          <button type="button" class="btn btn-primary" id="retryBtn">Tentar Novamente</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
  <script>
    // Inicialização da aplicação
    document.addEventListener('DOMContentLoaded', function() {
      // Carrega tema salvo
      const savedTheme = localStorage.getItem('iptv-theme') || 'verde';
      document.body.setAttribute('data-theme', savedTheme);
      updateThemeSelector(savedTheme);
      
      // Configura eventos dos temas
      document.querySelectorAll('.theme-option').forEach(option => {
        option.addEventListener('click', function() {
          const theme = this.dataset.theme;
          document.body.setAttribute('data-theme', theme);
          localStorage.setItem('iptv-theme', theme);
          updateThemeSelector(theme);
        });
      });
      
      // Inicializa a aplicação
      window.app = new IPTVApp();
    });

    function updateThemeSelector(activeTheme) {
      document.querySelectorAll('.theme-option').forEach(option => {
        option.classList.remove('active');
        if (option.dataset.theme === activeTheme) {
          option.classList.add('active');
        }
      });
    }

    // Sistema de favoritos com backend simulado
    class FavoritesBackend {
      constructor() {
        this.storageKey = 'iptv-favorites';
        this.favorites = this.load();
      }

      load() {
        try {
          const data = localStorage.getItem(this.storageKey);
          return data ? JSON.parse(data) : [];
        } catch (error) {
          console.error('Erro ao carregar favoritos:', error);
          return [];
        }
      }

      save() {
        try {
          localStorage.setItem(this.storageKey, JSON.stringify(this.favorites));
        } catch (error) {
          console.error('Erro ao salvar favoritos:', error);
        }
      }

      add(item) {
        if (!this.isFavorite(item.id)) {
          this.favorites.push({
            id: item.id,
            name: item.name,
            type: item.type,
            url: item.url,
            icon: item.icon,
            category: item.category,
            addedAt: new Date().toISOString()
          });
          this.save();
          return true;
        }
        return false;
      }

      remove(id) {
        const index = this.favorites.findIndex(fav => fav.id === id);
        if (index !== -1) {
          this.favorites.splice(index, 1);
          this.save();
          return true;
        }
        return false;
      }

      isFavorite(id) {
        return this.favorites.some(fav => fav.id === id);
      }

      getAll() {
        return [...this.favorites];
      }

      getByType(type) {
        return this.favorites.filter(fav => fav.type === type);
      }
    }

    // Classe principal da aplicação IPTV
    class IPTVApp {
      constructor() {
        this.currentCategory = 'channels';
        this.currentSubCategory = null;
        this.currentContent = null;
        this.currentEpisode = 0;
        this.player = null;
        this.hlsInstance = null;
        this.favorites = new FavoritesBackend();
        this.continueWatching = this.loadContinueWatching();
        this.searchTimeout = null;
        this.metadataInterval = null;
        
        // URLs da API
        this.apiUrls = {
          channels: 'https://seuservidor.com/api/live',
          movies: 'https://seuservidor.com/api/vod',
          series: 'https://seuservidor.com/api/series',
          radios: 'radios-complete.json',
          web: 'https://raw.githubusercontent.com/seuusuario/seurepositorio/main/web-channels.json'
        };
        
        this.init();
      }

      // FUNÇÃO PARA CORRIGIR CARACTERES COM ACENTOS UTF-8
      decodeHtmlEntities(text) {
        if (!text) return text;
        
        const entities = {
          '&aacute;': 'á', '&Aacute;': 'Á',
          '&agrave;': 'à', '&Agrave;': 'À',
          '&acirc;': 'â', '&Acirc;': 'Â',
          '&atilde;': 'ã', '&Atilde;': 'Ã',
          '&auml;': 'ä', '&Auml;': 'Ä',
          '&eacute;': 'é', '&Eacute;': 'É',
          '&egrave;': 'è', '&Egrave;': 'È',
          '&ecirc;': 'ê', '&Ecirc;': 'Ê',
          '&euml;': 'ë', '&Euml;': 'Ë',
          '&iacute;': 'í', '&Iacute;': 'Í',
          '&igrave;': 'ì', '&Igrave;': 'Ì',
          '&icirc;': 'î', '&Icirc;': 'Î',
          '&iuml;': 'ï', '&Iuml;': 'Ï',
          '&oacute;': 'ó', '&Oacute;': 'Ó',
          '&ograve;': 'ò', '&Ograve;': 'Ò',
          '&ocirc;': 'ô', '&Ocirc;': 'Ô',
          '&otilde;': 'õ', '&Otilde;': 'Õ',
          '&ouml;': 'ö', '&Ouml;': 'Ö',
          '&uacute;': 'ú', '&Uacute;': 'Ú',
          '&ugrave;': 'ù', '&Ugrave;': 'Ù',
          '&ucirc;': 'û', '&Ucirc;': 'Û',
          '&uuml;': 'ü', '&Uuml;': 'Ü',
          '&ccedil;': 'ç', '&Ccedil;': 'Ç',
          '&ntilde;': 'ñ', '&Ntilde;': 'Ñ',
          '&amp;': '&', '&lt;': '<', '&gt;': '>',
          '&quot;': '"', '&#39;': "'", '&nbsp;': ' '
        };
        
        let decodedText = text;
        for (const [entity, char] of Object.entries(entities)) {
          decodedText = decodedText.replace(new RegExp(entity, 'g'), char);
        }
        
        // Decodifica entidades numéricas
        decodedText = decodedText.replace(/&#(\d+);/g, (match, dec) => {
          return String.fromCharCode(dec);
        });
        
        // Decodifica entidades hexadecimais
        decodedText = decodedText.replace(/&#x([0-9a-f]+);/gi, (match, hex) => {
          return String.fromCharCode(parseInt(hex, 16));
        });
        
        return decodedText;
      }

      init() {
        this.initializePlayer();
        this.setupEventListeners();
        this.loadContent('channels');
      }

      initializePlayer() {
        this.player = videojs('videoPlayer', {
          fluid: true,
          responsive: true,
          playbackRates: [0.5, 1, 1.25, 1.5, 2],
          controls: true,
          preload: 'metadata'
        });

        // Eventos do player
        this.player.ready(() => {
          console.log('Player inicializado');
        });

        this.player.on('error', (event) => {
          console.error('Erro no player:', event);
          this.showError('Erro na reprodução. Tentando recarregar...');
          setTimeout(() => this.retryCurrentContent(), 3000);
        });

        this.player.on('timeupdate', () => {
          if (this.currentContent && this.currentContent.type !== 'radio') {
            this.saveContinueWatching();
          }
        });
      }

      setupEventListeners() {
        // Navegação principal
        document.querySelectorAll('#mainTabs .nav-link').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const category = e.target.closest('.nav-link').dataset.category;
            this.switchCategory(category);
          });
        });

        // Busca
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
          searchInput.addEventListener('input', (e) => {
            clearTimeout(this.searchTimeout);
            this.searchTimeout = setTimeout(() => {
              this.performSearch(e.target.value);
            }, 300);
          });
        }

        // Playlist
        const loadPlaylistBtn = document.getElementById('loadPlaylistBtn');
        if (loadPlaylistBtn) {
          loadPlaylistBtn.addEventListener('click', () => {
            this.loadPlaylist();
          });
        }

        // Relay
        const startRelayBtn = document.getElementById('startRelayBtn');
        const stopRelayBtn = document.getElementById('stopRelayBtn');
        if (startRelayBtn) {
          startRelayBtn.addEventListener('click', () => {
            this.startRelay();
          });
        }
        if (stopRelayBtn) {
          stopRelayBtn.addEventListener('click', () => {
            this.stopRelay();
          });
        }

        // Retry button no modal de erro
        const retryBtn = document.getElementById('retryBtn');
        if (retryBtn) {
          retryBtn.addEventListener('click', () => {
            this.retryCurrentContent();
            bootstrap.Modal.getInstance(document.getElementById('errorModal'))?.hide();
          });
        }
      }

      async loadContent(category) {
        this.currentCategory = category;
        this.showLoading(true);

        try {
          let data;
          
          if (category === 'favorites') {
            data = this.favorites.getAll();
            this.displayContent(data);
          } else if (category === 'radios') {
            // Carrega rádios do arquivo local
            const response = await fetch(this.apiUrls.radios);
            if (!response.ok) throw new Error('Falha ao carregar rádios');
            data = await response.json();
            this.processRadioData(data);
          } else if (category === 'web') {
            // Carrega canais web do GitHub
            try {
              const response = await fetch(this.apiUrls.web);
              if (!response.ok) {
                // Se não encontrar o arquivo, usa dados de exemplo
                data = [
                  {
                    "id": "kpoptv",
                    "name": "KpopTv",
                    "type": "web",
                    "url": "https://27353.live.streamtheworld.com:443/MIX_BOGOTAAAC.aac",
                    "icon": "https://kpoptv.htforum.net/wp-content/uploads/2024/11/logokpoptvplay-300x169.png",
                    "letter": "K"
                  }
                ];
              } else {
                data = await response.json();
              }
              this.displayContent(data);
            } catch (error) {
              console.error('Erro ao carregar canais web:', error);
              this.showError('Erro ao carregar canais web. Usando dados locais.');
              // Dados de fallback
              data = [
                {
                  "id": "kpoptv",
                  "name": "KpopTv",
                  "type": "web",
                  "url": "https://27353.live.streamtheworld.com:443/MIX_BOGOTAAAC.aac",
                  "icon": "https://kpoptv.htforum.net/wp-content/uploads/2024/11/logokpoptvplay-300x169.png",
                  "letter": "K"
                }
              ];
              this.displayContent(data);
            }
          } else {
            // Para outras categorias, simula dados ou carrega de API real
            data = await this.fetchFromAPI(category);
            this.processContentData(data, category);
          }

        } catch (error) {
          console.error('Erro ao carregar conteúdo:', error);
          this.showError(`Erro ao carregar ${category}. Tente novamente.`);
        } finally {
          this.showLoading(false);
        }
      }

      async fetchFromAPI(category) {
        // Simula dados para demonstração
        // Em produção, substituir por chamadas reais à API
        
        if (category === 'channels') {
          return this.generateSampleChannels();
        } else if (category === 'movies') {
          return this.generateSampleMovies();
        } else if (category === 'series') {
          return this.generateSampleSeries();
        }
        
        return [];
      }

      generateSampleChannels() {
        // Dados de exemplo para canais
        return [
          {
            id: 'globo',
            name: 'TV Globo',
            type: 'channel',
            url: 'https://exemplo.com/globo.m3u8',
            icon: 'https://via.placeholder.com/100x60/FF0000/FFFFFF?text=GLOBO',
            category: 'Abertos'
          },
          {
            id: 'sbt',
            name: 'SBT',
            type: 'channel',
            url: 'https://exemplo.com/sbt.m3u8',
            icon: 'https://via.placeholder.com/100x60/0066CC/FFFFFF?text=SBT',
            category: 'Abertos'
          }
        ];
      }

      generateSampleMovies() {
        return [
          {
            id: 'movie1',
            name: 'Filme de Exemplo',
            type: 'movie',
            url: 'https://exemplo.com/filme1.mp4',
            icon: 'https://via.placeholder.com/200x300/333333/FFFFFF?text=FILME',
            year: '2023',
            genre: 'Ação'
          }
        ];
      }

      generateSampleSeries() {
        return [
          {
            id: 'serie1',
            name: 'Série de Exemplo',
            type: 'series',
            icon: 'https://via.placeholder.com/200x300/660066/FFFFFF?text=SÉRIE',
            seasons: [
              {
                number: 1,
                episodes: [
                  {
                    number: 1,
                    name: 'Episódio 1',
                    url: 'https://exemplo.com/serie1_s1e1.mp4'
                  },
                  {
                    number: 2,
                    name: 'Episódio 2',
                    url: 'https://exemplo.com/serie1_s1e2.mp4'
                  }
                ]
              }
            ]
          }
        ];
      }

      processRadioData(radios) {
        // Agrupa rádios por estado
        const groupedRadios = {};
        
        radios.forEach(radio => {
          const state = radio.state || 'Outros';
          if (!groupedRadios[state]) {
            groupedRadios[state] = [];
          }
          groupedRadios[state].push(radio);
        });

        this.createSubTabs(Object.keys(groupedRadios));
        this.displayRadiosByState(groupedRadios, Object.keys(groupedRadios)[0]);
      }

      processContentData(data, category) {
        if (category === 'channels') {
          const categories = [...new Set(data.map(item => item.category))];
          this.createSubTabs(categories);
          if (categories.length > 0) {
            this.displayContentByCategory(data, categories[0]);
          } else {
            this.displayContent(data);
          }
        } else {
          this.clearSubTabs();
          this.displayContent(data);
        }
      }

      createSubTabs(categories) {
        const tabNav = document.getElementById('tabNav');
        tabNav.innerHTML = '';

        categories.forEach((category, index) => {
          const button = document.createElement('button');
          button.className = `tab-btn ${index === 0 ? 'active' : ''}`;
          button.textContent = category;
          button.addEventListener('click', () => {
            this.switchSubCategory(category);
          });
          tabNav.appendChild(button);
        });

        document.getElementById('tabBar').style.display = 'block';
        this.currentSubCategory = categories[0];
      }

      clearSubTabs() {
        document.getElementById('tabBar').style.display = 'none';
        this.currentSubCategory = null;
      }

      switchCategory(category) {
        // Atualiza UI
        document.querySelectorAll('#mainTabs .nav-link').forEach(link => {
          link.classList.remove('active');
        });
        document.querySelector(`[data-category="${category}"]`).classList.add('active');

        // Para metadata de rádio
        if (this.metadataInterval) {
          clearInterval(this.metadataInterval);
          this.metadataInterval = null;
        }

        this.loadContent(category);
      }

      switchSubCategory(subCategory) {
        document.querySelectorAll('.tab-btn').forEach(btn => {
          btn.classList.remove('active');
        });
        document.querySelector(`.tab-btn:contains("${subCategory}")`).classList.add('active');

        this.currentSubCategory = subCategory;
        
        if (this.currentCategory === 'radios') {
          // Recarrega rádios para a categoria selecionada
          this.loadRadiosByState(subCategory);
        } else {
          // Para outras categorias, filtra por subcategoria
          this.loadContentBySubCategory(subCategory);
        }
      }

      async loadRadiosByState(state) {
        try {
          const response = await fetch(this.apiUrls.radios);
          const radios = await response.json();
          const stateRadios = radios.filter(radio => radio.state === state);
          this.displayContent(stateRadios);
        } catch (error) {
          console.error('Erro ao carregar rádios do estado:', error);
        }
      }

      displayRadiosByState(groupedRadios, initialState) {
        this.displayContent(groupedRadios[initialState] || []);
      }

      displayContentByCategory(data, category) {
        const filteredData = data.filter(item => item.category === category);
        this.displayContent(filteredData);
      }

      displayContent(items) {
        const contentList = document.getElementById('contentList');
        contentList.innerHTML = '';

        if (!items || items.length === 0) {
          contentList.innerHTML = `
            <div class="text-center p-4 text-muted">
              <i class="fas fa-inbox fa-3x mb-3" style="opacity: 0.5;"></i>
              <h5>Nenhum conteúdo encontrado</h5>
              <p>Não há itens disponíveis nesta categoria.</p>
            </div>
          `;
          return;
        }

        items.forEach(item => {
          const element = this.createContentElement(item);
          contentList.appendChild(element);
        });
      }

      createContentElement(item) {
        const div = document.createElement('div');
        div.className = 'content-item';
        div.dataset.id = item.id;

        const isFavorited = this.favorites.isFavorite(item.id);
        
        // Decodifica o nome para exibição correta
        const decodedName = this.decodeHtmlEntities(item.name);
        
        div.innerHTML = `
          <img class="content-icon" src="${item.icon || 'https://via.placeholder.com/70x50/333/fff?text=NO+IMG'}" 
               alt="${decodedName}" onerror="this.src='https://via.placeholder.com/70x50/333/fff?text=ERROR'">
          <div class="content-info">
            <div class="content-title">${decodedName}</div>
            <div class="content-meta">
              ${this.getContentMeta(item)}
            </div>
          </div>
          <div class="content-actions">
            <button class="action-btn favorite-btn ${isFavorited ? 'favorited' : ''}" 
                    title="${isFavorited ? 'Remover dos favoritos' : 'Adicionar aos favoritos'}">
              <i class="fas fa-heart"></i>
            </button>
            <button class="action-btn share-btn" title="Compartilhar">
              <i class="fas fa-share-alt"></i>
            </button>
          </div>
        `;

        // Event listeners
        div.addEventListener('click', (e) => {
          if (!e.target.closest('.content-actions')) {
            this.playContent(item);
          }
        });

        div.querySelector('.favorite-btn').addEventListener('click', (e) => {
          e.stopPropagation();
          this.toggleFavorite(item);
        });

        div.querySelector('.share-btn').addEventListener('click', (e) => {
          e.stopPropagation();
          this.shareContent(item);
        });

        return div;
      }

      getContentMeta(item) {
        if (item.type === 'radio') {
          return `${item.frequency || ''} • ${item.city || ''} - ${item.state || ''}`;
        } else if (item.type === 'movie') {
          return `${item.year || ''} • ${item.genre || ''} • Filme`;
        } else if (item.type === 'series') {
          const seasons = item.seasons ? item.seasons.length : 0;
          return `${seasons} temporada${seasons !== 1 ? 's' : ''} • Série`;
        } else if (item.type === 'channel') {
          return `${item.category || ''} • Canal`;
        } else if (item.type === 'web') {
          return 'Canal Web';
        }
        return item.type || '';
      }

      async playContent(item) {
        try {
          this.currentContent = item;
          
          // Remove indicadores de reprodução anteriores
          document.querySelectorAll('.content-item.playing').forEach(el => {
            el.classList.remove('playing');
          });
          
          // Adiciona indicador ao item atual
          const currentElement = document.querySelector(`[data-id="${item.id}"]`);
          if (currentElement) {
            currentElement.classList.add('playing');
          }

          // Esconde placeholder
          document.getElementById('videoPlaceholder').style.display = 'none';

          if (item.type === 'radio' || item.type === 'web') {
            await this.playRadio(item);
          } else if (item.type === 'series') {
            this.currentEpisode = 0;
            await this.playSeries(item);
          } else {
            await this.playVideo(item.url);
            this.hideRadioDisplay();
            this.hideEpisodeNavigation();
          }

          // Anima logo
          this.animatePlayerLogo(item.icon);

          // Salva no histórico
          this.addToContinueWatching(item);

        } catch (error) {
          console.error('Erro ao reproduzir conteúdo:', error);
          this.showError('Erro ao reproduzir conteúdo. Tente novamente.');
        }
      }

      async playRadio(radio) {
        try {
          // Configura display visual da rádio
          this.setupRadioDisplay(radio);
          
          // Reproduz áudio
          await this.playVideo(radio.url);
          
          // Inicia busca de metadata
          this.startMetadataFetching(radio);
          
          // Esconde navegação de episódios
          this.hideEpisodeNavigation();
          
        } catch (error) {
          console.error('Erro ao reproduzir rádio:', error);
          this.showError('Erro ao reproduzir rádio. Tente novamente.');
        }
      }

      setupRadioDisplay(radio) {
        const radioDisplay = document.getElementById('radioVisualDisplay');
        const radioBackground = document.getElementById('radioBackground');
        const radioMainImage = document.getElementById('radioMainImage');
        const radioMainName = document.getElementById('radioMainName');
        const radioMainFrequency = document.getElementById('radioMainFrequency');
        
        // Nome decodificado
        const decodedName = this.decodeHtmlEntities(radio.name);
        
        // Configura imagens e informações
        radioBackground.style.backgroundImage = `url(${radio.icon})`;
        radioMainImage.src = radio.icon;
        radioMainName.textContent = decodedName;
        radioMainFrequency.textContent = `${radio.frequency || ''} • ${radio.city || ''} - ${radio.state || ''}`;
        
        // Configura overlay pequeno
        const overlay = document.getElementById('radioInfoOverlay');
        const logoSmall = document.getElementById('radioLogoSmall');
        const nameOverlay = document.getElementById('radioNameOverlay');
        const frequencyOverlay = document.getElementById('radioFrequencyOverlay');
        
        logoSmall.src = radio.icon;
        nameOverlay.textContent = decodedName;
        frequencyOverlay.textContent = radio.frequency || '';
        
        // Mostra displays
        radioDisplay.classList.add('active');
        overlay.classList.add('visible');
      }

      hideRadioDisplay() {
        document.getElementById('radioVisualDisplay').classList.remove('active');
        document.getElementById('radioInfoOverlay').classList.remove('visible');
        
        // Para metadata
        if (this.metadataInterval) {
          clearInterval(this.metadataInterval);
          this.metadataInterval = null;
        }
        
        // Esconde display de música
        document.getElementById('nowPlayingDisplay').style.display = 'none';
      }

      async startMetadataFetching(radio) {
        // Para busca anterior
        if (this.metadataInterval) {
          clearInterval(this.metadataInterval);
        }
        
        // Função para buscar metadata
        const fetchMetadata = async () => {
          try {
            // Simula busca de metadata (substitua pela API real)
            const metadata = await this.fetchRadioMetadata(radio);
            if (metadata && metadata.title) {
              this.updateNowPlaying(metadata.title);
            }
          } catch (error) {
            console.log('Metadata não disponível para esta rádio');
          }
        };
        
        // Busca inicial
        await fetchMetadata();
        
        // Configura busca periódica (a cada 10 segundos)
        this.metadataInterval = setInterval(fetchMetadata, 10000);
      }

      async fetchRadioMetadata(radio) {
        // Exemplo de implementação - substitua pela sua API de metadata
        try {
          // Simulação de metadata aleatório para demonstração
          const sampleTracks = [
            'Música Atual - Artista Exemplo',
            'Nova Canção - Cantor Popular',
            'Hit do Momento - Banda Famosa',
            'Clássico Atemporal - Ícone Musical'
          ];
          
          // Simula delay de rede
          await new Promise(resolve => setTimeout(resolve, 500));
          
          return {
            title: this.decodeHtmlEntities(sampleTracks[Math.floor(Math.random() * sampleTracks.length)]),
            artist: 'Artista Exemplo',
            album: 'Álbum Exemplo'
          };
        } catch (error) {
          console.error('Erro ao buscar metadata:', error);
          return null;
        }
      }

      updateNowPlaying(title) {
        const nowPlayingDisplay = document.getElementById('nowPlayingDisplay');
        const nowPlayingText = document.getElementById('nowPlayingText');
        
        nowPlayingText.textContent = title;
        nowPlayingDisplay.style.display = 'inline-flex';
      }

      async playSeries(series) {
        if (!series.seasons || series.seasons.length === 0) {
          throw new Error('Série sem episódios disponíveis');
        }

        const firstSeason = series.seasons[0];
        const firstEpisode = firstSeason.episodes[0];

        await this.playVideo(firstEpisode.url);
        this.setupEpisodeNavigation(series);
        this.hideRadioDisplay();
      }

      setupEpisodeNavigation(series) {
        const navigation = document.getElementById('episodeNavigation');
        const buttonsContainer = document.getElementById('episodeButtons');
        
        buttonsContainer.innerHTML = '';

        // Para simplicidade, mostra apenas primeira temporada
        const season = series.seasons[0];
        
        season.episodes.forEach((episode, index) => {
          const button = document.createElement('button');
          button.className = `episode-btn ${index === this.currentEpisode ? 'current' : ''}`;
          button.textContent = `EP ${episode.number}`;
          button.title = episode.name;
          
          button.addEventListener('click', () => {
            this.playEpisode(series, index);
          });
          
          buttonsContainer.appendChild(button);
        });

        navigation.style.display = 'block';
        document.getElementById('customControls').style.display = 'flex';
      }

      hideEpisodeNavigation() {
        document.getElementById('episodeNavigation').style.display = 'none';
        document.getElementById('customControls').style.display = 'none';
      }

      async playEpisode(series, episodeIndex) {
        this.currentEpisode = episodeIndex;
        const episode = series.seasons[0].episodes[episodeIndex];
        
        await this.playVideo(episode.url);
        
        // Atualiza botões de episódio
        document.querySelectorAll('.episode-btn').forEach((btn, index) => {
          btn.classList.toggle('current', index === episodeIndex);
        });
      }

      async playVideo(url) {
        try {
          if (this.hlsInstance) {
            this.hlsInstance.destroy();
            this.hlsInstance = null;
          }

          this.player.pause();

          if (Hls.isSupported() && url.includes('.m3u8')) {
            this.hlsInstance = new Hls({
              enableWorker: true,
              lowLatencyMode: true,
              backBufferLength: 90
            });

            this.hlsInstance.loadSource(url);
            this.hlsInstance.attachMedia(this.player.tech().el());

            this.hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {
              this.player.play().catch(e => console.log('Autoplay bloqueado:', e));
            });

            this.hlsInstance.on(Hls.Events.ERROR, (event, data) => {
              console.error('Erro HLS:', data);
              if (data.fatal) {
                this.handleHLSError(data);
              }
            });
          } else {
            this.player.src(url);
            this.player.ready(() => {
              this.player.play().catch(e => console.log('Autoplay bloqueado:', e));
            });
          }
        } catch (error) {
          console.error('Erro ao reproduzir vídeo:', error);
          throw error;
        }
      }

      handleHLSError(data) {
        switch(data.type) {
          case Hls.ErrorTypes.NETWORK_ERROR:
            console.log('Erro de rede, tentando recuperar...');
            this.hlsInstance.startLoad();
            break;
          case Hls.ErrorTypes.MEDIA_ERROR:
            console.log('Erro de mídia, tentando recuperar...');
            this.hlsInstance.recoverMediaError();
            break;
          default:
            console.log('Erro fatal no HLS, destruindo instância...');
            this.hlsInstance.destroy();
            this.retryCurrentContent();
            break;
        }
      }

      retryCurrentContent() {
        if (this.currentContent) {
          console.log('Tentando reproduzir novamente:', this.currentContent.name);
          setTimeout(() => {
            this.playContent(this.currentContent);
          }, 2000);
        }
      }

      animatePlayerLogo(iconUrl) {
        if (!iconUrl) return;

        const logo = document.getElementById('playerLogo');
        logo.src = iconUrl;
        logo.style.display = 'block';
        
        // Remove classes anteriores
        logo.classList.remove('animate-center', 'animate-to-position');
        
        // Inicia animação
        setTimeout(() => {
          logo.classList.add('animate-center');
        }, 100);
        
        // Move para posição final
        setTimeout(() => {
          logo.classList.remove('animate-center');
          logo.classList.add('animate-to-position');
        }, 1500);
      }

      toggleFavorite(item) {
        const isFavorited = this.favorites.isFavorite(item.id);
        
        if (isFavorited) {
          this.favorites.remove(item.id);
          this.showNotification('Removido dos favoritos', 'success');
        } else {
          this.favorites.add(item);
          this.showNotification('Adicionado aos favoritos', 'success');
        }

        // Atualiza UI
        this.updateFavoriteButton(item.id, !isFavorited);
        
        // Se estamos na aba favoritos, recarrega
        if (this.currentCategory === 'favorites') {
          this.displayContent(this.favorites.getAll());
        }
      }

      updateFavoriteButton(itemId, isFavorited) {
        const element = document.querySelector(`[data-id="${itemId}"] .favorite-btn`);
        if (element) {
          element.classList.toggle('favorited', isFavorited);
          element.title = isFavorited ? 'Remover dos favoritos' : 'Adicionar aos favoritos';
        }
      }

      shareContent(item) {
        if (navigator.share) {
          navigator.share({
            title: item.name,
            text: `Confira: ${item.name}`,
            url: window.location.href
          }).catch(console.error);
        } else {
          // Fallback para navegadores sem Web Share API
          const url = window.location.href;
          navigator.clipboard.writeText(url).then(() => {
            this.showNotification('Link copiado para a área de transferência', 'success');
          }).catch(() => {
            this.showNotification('Erro ao copiar link', 'error');
          });
        }
      }

      // Continue assistindo
      loadContinueWatching() {
        try {
          const data = localStorage.getItem('iptv-continue-watching');
          return data ? JSON.parse(data) : [];
        } catch (error) {
          console.error('Erro ao carregar histórico:', error);
          return [];
        }
      }

      saveContinueWatching() {
        try {
          localStorage.setItem('iptv-continue-watching', JSON.stringify(this.continueWatching));
        } catch (error) {
          console.error('Erro ao salvar histórico:', error);
        }
      }

      addToContinueWatching(item) {
        // Remove se já existe
        this.continueWatching = this.continueWatching.filter(cw => cw.id !== item.id);
        
        // Adiciona no início
        this.continueWatching.unshift({
          ...item,
          watchedAt: new Date().toISOString(),
          currentTime: 0,
          duration: 0
        });

        // Mantém apenas os últimos 20
        this.continueWatching = this.continueWatching.slice(0, 20);
        
        this.saveContinueWatching();
      }

      // Busca
      async performSearch(query) {
        if (!query.trim()) {
          document.getElementById('searchResults').innerHTML = `
            <div class="text-center p-3 text-muted">
              Digite algo para buscar canais, filmes, séries, rádios ou web...
            </div>
          `;
          return;
        }

        const results = [];
        
        try {
          // Busca em rádios
          const radioResponse = await fetch(this.apiUrls.radios);
          const radios = await radioResponse.json();
          const radioResults = radios.filter(radio => 
            this.decodeHtmlEntities(radio.name).toLowerCase().includes(query.toLowerCase()) ||
            (radio.city && radio.city.toLowerCase().includes(query.toLowerCase())) ||
            (radio.state && radio.state.toLowerCase().includes(query.toLowerCase()))
          );
          results.push(...radioResults);

          // Busca em outras categorias (simular para demonstração)
          const channels = this.generateSampleChannels();
          const channelResults = channels.filter(channel => 
            channel.name.toLowerCase().includes(query.toLowerCase())
          );
          results.push(...channelResults);

          // Busca em web
          try {
            const webResponse = await fetch(this.apiUrls.web);
            if (webResponse.ok) {
              const webChannels = await webResponse.json();
              const webResults = webChannels.filter(web => 
                web.name.toLowerCase().includes(query.toLowerCase())
              );
              results.push(...webResults);
            }
          } catch (error) {
            console.log('Erro ao buscar em canais web:', error);
          }

        } catch (error) {
          console.error('Erro na busca:', error);
        }

        this.displaySearchResults(results);
      }

      displaySearchResults(results) {
        const container = document.getElementById('searchResults');
        
        if (results.length === 0) {
          container.innerHTML = `
            <div class="text-center p-3 text-muted">
              <i class="fas fa-search fa-2x mb-2" style="opacity: 0.5;"></i>
              <div>Nenhum resultado encontrado</div>
            </div>
          `;
          return;
        }

        container.innerHTML = '';
        results.forEach(item => {
          const element = this.createContentElement(item);
          container.appendChild(element);
        });
      }

      // Playlist
      async loadPlaylist() {
        const url = document.getElementById('playlistUrl').value;
        const name = document.getElementById('playlistName').value;

        if (!url) {
          this.showNotification('Digite uma URL válida', 'error');
          return;
        }

        try {
          const response = await fetch(url);
          const m3uContent = await response.text();
          
          const playlist = this.parseM3U(m3uContent);
          
          if (playlist.length === 0) {
            this.showNotification('Playlist vazia ou formato inválido', 'error');
            return;
          }

          // Salva playlist
          const savedPlaylists = JSON.parse(localStorage.getItem('iptv-playlists') || '[]');
          savedPlaylists.push({
            name: name || 'Playlist Importada',
            url: url,
            items: playlist,
            importedAt: new Date().toISOString()
          });
          localStorage.setItem('iptv-playlists', JSON.stringify(savedPlaylists));

          this.showNotification(`Playlist carregada: ${playlist.length} itens`, 'success');
          
          // Fecha modal
          bootstrap.Modal.getInstance(document.getElementById('playlistModal')).hide();
          
          // Limpa campos
          document.getElementById('playlistUrl').value = '';
          document.getElementById('playlistName').value = '';

        } catch (error) {
          console.error('Erro ao carregar playlist:', error);
          this.showNotification('Erro ao carregar playlist', 'error');
        }
      }

      parseM3U(content) {
        const lines = content.split('\n');
        const items = [];
        let currentItem = null;

        for (let i = 0; i < lines.length; i++) {
          const line = lines[i].trim();
          
          if (line.startsWith('#EXTINF:')) {
            // Extrai informações do canal
            const match = line.match(/#EXTINF:.*,(.+)/);
            if (match) {
              currentItem = {
                id: 'playlist_' + Date.now() + '_' + i,
                name: match[1].trim(),
                type: 'channel'
              };
            }
          } else if (line && !line.startsWith('#') && currentItem) {
            // URL do canal
            currentItem.url = line;
            currentItem.icon = 'https://via.placeholder.com/70x50/333/fff?text=IPTV';
            items.push(currentItem);
            currentItem = null;
          }
        }

        return items;
      }

      // Relay WebSocket
      startRelay() {
        const url = document.getElementById('relayUrl').value;
        if (!url) {
          this.showNotification('Digite uma URL para relay', 'error');
          return;
        }

        // Simulação de relay - em produção, implementar WebSocket real
        this.updateRelayStatus('loading', 'Iniciando relay...');
        
        setTimeout(() => {
          this.updateRelayStatus('online', 'Relay ativo');
          this.addRelayLog('Relay iniciado com sucesso');
          this.addRelayLog(`URL: ${url}`);
        }, 2000);
      }

      stopRelay() {
        this.updateRelayStatus('offline', 'Relay parado');
        this.addRelayLog('Relay interrompido pelo usuário');
      }

      updateRelayStatus(status, message) {
        const statusElement = document.getElementById('relayStatus');
        statusElement.className = `relay-status ${status}`;
        statusElement.innerHTML = `<strong>Status:</strong> ${message}`;
      }

      addRelayLog(message) {
        const logsContainer = document.getElementById('relayLogs');
        const timestamp = new Date().toLocaleTimeString();
        const logEntry = document.createElement('div');
        logEntry.innerHTML = `[${timestamp}] ${message}`;
        logsContainer.appendChild(logEntry);
        logsContainer.scrollTop = logsContainer.scrollHeight;
      }

      // Controles de episódio
      previousEpisode() {
        if (this.currentContent && this.currentContent.type === 'series' && this.currentEpisode > 0) {
          this.playEpisode(this.currentContent, this.currentEpisode - 1);
        }
      }

      nextEpisode() {
        if (this.currentContent && this.currentContent.type === 'series') {
          const maxEpisodes = this.currentContent.seasons[0].episodes.length;
          if (this.currentEpisode < maxEpisodes - 1) {
            this.playEpisode(this.currentContent, this.currentEpisode + 1);
          }
        }
      }

      // Utilitários
      showLoading(show) {
        // Implementar spinner de loading se necessário
        if (show) {
          console.log('Carregando...');
        }
      }

      showError(message) {
        const errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
        document.getElementById('errorMessage').textContent = message;
        errorModal.show();
      }

      showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `
          <i class="fas fa-${this.getNotificationIcon(type)}"></i>
          <span>${message}</span>
        `;

        document.body.appendChild(notification);

        // Trigger show animation
        setTimeout(() => notification.classList.add('show'), 100);

        // Auto remove
        setTimeout(() => {
          notification.classList.remove('show');
          setTimeout(() => {
            if (notification.parentNode) {
              notification.parentNode.removeChild(notification);
            }
          }, 300);
        }, 3000);
      }

      getNotificationIcon(type) {
        switch(type) {
          case 'success': return 'check-circle';
          case 'error': return 'exclamation-circle';
          case 'warning': return 'exclamation-triangle';
          default: return 'info-circle';
        }
      }
    }

    // Funções globais
    function shareApp() {
      if (navigator.share) {
        navigator.share({
          title: 'IPTV Player v9',
          text: 'Confira este player IPTV incrível!',
          url: window.location.href
        });
      } else {
        navigator.clipboard.writeText(window.location.href).then(() => {
          window.app?.showNotification('Link copiado!', 'success');
        });
      }
    }

    function previousEpisode() {
      window.app?.previousEpisode();
    }

    function nextEpisode() {
      window.app?.nextEpisode();
    }

    // Inicialização quando DOM estiver pronto
    document.addEventListener('DOMContentLoaded', function() {
      console.log('IPTV Player v9 - Inicializando...');
    });
  </script>
</body>
</html>